# ホテル予約システム

## 概要
このプロジェクトは、Javaで実装されたコマンドライン型のホテル予約管理システムです。
UML設計図に基づいて作成され、予約・チェックイン・チェックアウト機能を提供します。

## 最新の更新情報 (2025年7月12日)
- メソッド名のタイポ修正: `setChackinDone()` → `setCheckinDone()` 
- UML設計文書との完全準拠を実現
- 包括的なUML準拠性分析レポートを追加

## 機能
### 1. 予約機能
- 宿泊日時・人数の入力
- 部屋グレード（スタンダード・デラックス・スイート）別の空室状況表示
- プラン選択（PlanA・PlanB・PlanC）
- 個人情報入力・確認
- 予約情報の生成・CSV保存

### 2. チェックイン機能
- 予約番号による予約検索
- チェックイン完了処理
- 予約状況の更新

### 3. チェックアウト機能
- 部屋番号による予約検索
- 宿泊料金の表示
- チェックアウト完了処理
- 空室状況の復元

## 実行方法

### 推奨方法（日本語対応）

1. コマンドプロンプトまたはPowerShellで、プロジェクトの `src` ディレクトリに移動します。

2. Javaファイルをコンパイルします（UTF-8エンコーディング指定）。

```bash
javac -encoding UTF-8 *.java
```

3. **方法1: バッチファイル使用（推奨）**
   文字化け対策済みのバッチファイルを実行します：
   ```bash
   run.bat
   ```

4. **方法2: 直接実行**
   UTF-8エンコーディングを指定して実行します：
   ```bash
   java -Dfile.encoding=UTF-8 -Dconsole.encoding=UTF-8 Main
   ```

### 従来の実行方法
**注意**: この方法では日本語名前の入力時に文字化けが発生する可能性があります。

```bash
javac *.java
java Main
```

### 実行時の注意事項
- **日本語入力**: 名前などの日本語入力を正しく処理するため、必ずUTF-8エンコーディングを指定してください
- **文字化け対策**: `run.bat`を使用することで、コンソールとファイル両方の文字エンコーディングが適切に設定されます
- **CSV保存**: 予約情報は自動的にUTF-8形式でCSVファイルに保存されます

## 使用方法

### メニュー選択
```
ホテル予約システム
1.予約 2.チェックイン 3.チェックアウト 0.終了
```

### 1. 予約の流れ
1. チェックイン日・チェックアウト日・人数を入力
2. 各グレードの空室状況・料金を確認
3. 部屋グレードを選択（0=スタンダード、1=デラックス、2=スイート）
4. プランを選択（0=PlanA、1=PlanB、2=PlanC）
5. 個人情報（名前・メールアドレス・電話番号）を入力
6. 入力内容を確認
7. 予約完了

### 2. チェックインの流れ
1. 予約番号を入力
2. 予約情報の表示・確認
3. チェックイン完了

### 3. チェックアウトの流れ
1. 部屋番号を入力
2. 宿泊料金の表示
3. チェックアウト完了

## データ管理
システムは以下のCSVファイルでデータを管理します：

### reservations.csv
予約情報を管理するメインファイル
```
予約番号,価格,チェックイン日,チェックアウト日,人数,チェックアウト完了,チェックイン完了,部屋番号,プラン種類,プラン価格,名前,メールアドレス,電話番号
```

### 部屋状況ファイル
- `standard_rooms.csv` - スタンダードルームの空室状況
- `deluxe_rooms.csv` - デラックスルームの空室状況  
- `suite_rooms.csv` - スイートルームの空室状況

## システム構成

### 主要クラス
- **Main**: システムのエントリポイント・メニュー制御
- **Reservation**: 予約情報エンティティ
- **Room**: 部屋情報エンティティ
- **UserInfo**: ユーザー情報エンティティ
- **Grade** (Standard/Deluxe/Suite): 部屋グレード管理
- **Plan** (PlanA/PlanB/PlanC): 宿泊プラン管理

### UI・制御クラス
- **ReservationUI/ReservationControl**: 予約機能
- **CheckinUI/CheckinControl**: チェックイン機能
- **CheckoutUI/CheckoutControl**: チェックアウト機能

### データ管理
- **CsvManager**: CSV ファイルの読み書き処理

## 部屋・プラン設定

### 部屋グレード
- **スタンダード (101-110)**: 10,000円/泊、10室
- **デラックス (201-205)**: 15,000円/泊、5室  
- **スイート (301-302)**: 20,000円/泊、2室

### 宿泊プラン
- **PlanA**: 1,000円
- **PlanB**: 2,000円
- **PlanC**: 3,000円

## 設計仕様・品質分析
本システムは以下の設計文書に基づいて実装されています：
- `classDiagram.txt`: UMLクラス図
- `communicationDiagramReservation.txt`: 予約フローのコミュニケーション図
- `communicationDiagramCheckin.txt`: チェックインフローのコミュニケーション図
- `communicationDiagramCheckout.txt`: チェックアウトフローのコミュニケーション図
- `注意事項.txt`: 実装ガイドライン・仕様詳細

### UML準拠性分析レポート
各機能のUML設計準拠性を詳細に分析した結果：
- **予約機能**: 98% UML準拠 (A評価) - `UML準拠性分析結果_更新版.txt`
- **チェックイン機能**: 98% UML準拠 (A評価) - `チェックイン機能UML準拠性分析結果.txt`
- **チェックイン機能(CSV除外)**: 92% UML準拠 (A評価) - `チェックイン機能UML準拠性分析結果_CSV除外版.txt`
- **チェックアウト機能**: 95% UML準拠 (A評価) - `チェックアウト機能UML準拠性分析結果.txt`

全機能において90%以上のUML準拠率を達成し、設計意図を正確に実装していることが検証済みです。

## 注意事項
- コマンドラインでの入出力のみサポート
- クラス図・コラボレーション図で定義されたフローのみ実装
- 失敗時は警告メッセージを表示
- 電話番号は文字列形式（ハイフンあり）で管理
- データの永続化はCSVファイルで実行

## ファイル構成
```
├── src/
│   ├── Main.java                    # メインプログラム
│   ├── run.bat                      # 実行用バッチファイル（UTF-8対応）
│   ├── Reservation.java             # 予約エンティティ
│   ├── Room.java                    # 部屋エンティティ
│   ├── UserInfo.java               # ユーザー情報エンティティ
│   ├── Grade.java                   # 部屋グレード抽象クラス
│   ├── Standard.java               # スタンダードルーム
│   ├── Deluxe.java                 # デラックスルーム
│   ├── Suite.java                  # スイートルーム
│   ├── Plan.java                   # プラン抽象クラス
│   ├── PlanA.java                  # プランA
│   ├── PlanB.java                  # プランB
│   ├── PlanC.java                  # プランC
│   ├── ReservationUI.java          # 予約UI
│   ├── ReservationControl.java     # 予約制御
│   ├── CheckinUI.java              # チェックインUI
│   ├── CheckinControl.java         # チェックイン制御
│   ├── CheckoutUI.java             # チェックアウトUI
│   ├── CheckoutControl.java        # チェックアウト制御
│   ├── CsvManager.java             # CSV管理
│   ├── reservations.csv            # 予約データ
│   ├── standard_rooms.csv          # スタンダードルーム空室データ
│   ├── deluxe_rooms.csv            # デラックスルーム空室データ
│   └── suite_rooms.csv             # スイートルーム空室データ
├── README.md                       # このファイル
├── classDiagram.txt                # UMLクラス図
├── communicationDiagramReservation.txt  # 予約フロー図
├── communicationDiagramCheckin.txt      # チェックインフロー図
├── communicationDiagramCheckout.txt     # チェックアウトフロー図
├── 注意事項.txt                     # 実装仕様・ガイドライン
├── UML準拠性分析結果_更新版.txt      # 予約機能UML準拠性分析
├── チェックイン機能UML準拠性分析結果.txt # チェックイン機能UML準拠性分析
├── チェックイン機能UML準拠性分析結果_CSV除外版.txt # チェックイン機能UML準拠性分析(CSV除外)
└── チェックアウト機能UML準拠性分析結果.txt # チェックアウト機能UML準拠性分析
```

## 開発者向け情報
- Java SE環境で動作
- 外部ライブラリ依存なし
- MVCパターンに基づく設計
- UML設計図準拠の実装（全機能90%以上のUML準拠率を達成）
- コード内に「クラス図から作成」「csvファイルのために追加」のコメントで実装根拠を明記

### 最近の改善内容
- **2025年7月12日**: メソッド名タイポ修正 (`setChackinDone` → `setCheckinDone`)
- 包括的なUML準拠性分析の実施・文書化
- 各機能における詳細な品質評価の完了

## トラブルシューティング

### 文字化け問題
**問題**: 日本語の名前入力時に文字化けが発生する
**解決方法**: 
1. `run.bat`を使用して実行する
2. または、`java -Dfile.encoding=UTF-8 -Dconsole.encoding=UTF-8 Main`で実行

### コンパイルエラー
**問題**: 日本語コメントが原因でコンパイルエラーが発生
**解決方法**: `javac -encoding UTF-8 *.java`でコンパイル

### CSVファイルが見つからない
**問題**: 初回実行時にCSVファイルがない
**解決方法**: システムが自動的に初期データを生成するため、そのまま実行可能

### バッチファイルの内容
`run.bat`には以下の設定が含まれています :
```batch
@echo off
chcp 65001          # UTF-8コードページ設定
java -Dfile.encoding=UTF-8 -Dconsole.encoding=UTF-8 Main
pause               # 実行後の結果確認用
```

## 動作確認済み環境
- Windows 10/11
- Java SE 8以降
- PowerShell 5.1以降
- コマンドプロンプト
